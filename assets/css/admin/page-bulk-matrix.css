/**
 * Hotel Rooms Admin Styles
 * Tối ưu sử dụng WP native classes, chỉ custom khi cần thiết
 * 
 * @package VieHotelRooms
 */

/* ===== Required Indicator ===== */
.required { color: #d63638; }

/* ===== Status Badges ===== */
.vie-status { display: inline-block; padding: 2px 8px; border-radius: 3px; font-size: 12px; }
.vie-status-active { background: #d4edda; color: #155724; }
.vie-status-inactive { background: #f8d7da; color: #721c24; }
.vie-status-draft { background: #e2e3e5; color: #383d41; }

/* ===== Two Column Layout (Form) ===== */
#poststuff .vie-columns { display: flex; gap: 20px; }
#poststuff .vie-col-main { flex: 1; min-width: 0; }
#poststuff .vie-col-side { width: 280px; }

/* ===== Gallery Grid ===== */
.vie-gallery { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 10px; }
.vie-gallery-item { position: relative; aspect-ratio: 1; border-radius: 3px; overflow: hidden; border: 1px solid #c3c4c7; }
.vie-gallery-item img { width: 100%; height: 100%; object-fit: cover; }
.vie-gallery-item .remove { position: absolute; top: 2px; right: 2px; background: rgba(0,0,0,.7); color: #fff; border: 0; width: 18px; height: 18px; border-radius: 50%; cursor: pointer; font-size: 12px; line-height: 16px; }
.vie-gallery-item .remove:hover { background: #d63638; }

/* ===== Image Preview ===== */
.vie-image-preview { min-height: 120px; background: #f0f0f1; border-radius: 3px; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; }
.vie-image-preview img { max-width: 100%; height: auto; border-radius: 3px; }

/* ===== Surcharges Repeater ===== */
.vie-repeater-item { background: #f6f7f7; border: 1px solid #c3c4c7; margin-bottom: 10px; }
.vie-repeater-header { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: #fff; border-bottom: 1px solid #c3c4c7; cursor: move; }
.vie-repeater-header strong { font-size: 13px; }
.vie-repeater-body { padding: 12px; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; }
.vie-repeater-body .field { display: flex; flex-direction: column; gap: 4px; }
.vie-repeater-body .field label { font-size: 11px; font-weight: 600; color: #1d2327; }
.vie-repeater-body .field input,
.vie-repeater-body .field select { width: 100%; }
.vie-repeater-body .inline-fields { display: flex; gap: 5px; align-items: center; }
.vie-repeater-body .inline-fields input { width: 60px; }
.vie-repeater-body .checkbox-group { flex-direction: row; gap: 12px; flex-wrap: wrap; }
.vie-repeater-body .checkbox-group label { font-weight: normal; display: inline-flex; align-items: center; gap: 4px; }

/* ===== Calendar Header ===== */
.vie-cal-toolbar { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; margin-bottom: 15px; }
.vie-cal-toolbar .selectors { display: flex; gap: 15px; align-items: center; }
.vie-cal-toolbar .selectors label { font-weight: 500; margin-right: 5px; }
.vie-cal-toolbar .selectors select { min-width: 180px; }
.vie-cal-legend { display: flex; gap: 12px; font-size: 12px; }
.vie-cal-legend span { display: flex; align-items: center; gap: 4px; }
.vie-cal-legend span::before { content: ''; width: 10px; height: 10px; border-radius: 2px; }
.vie-cal-legend .available::before { background: #00a32a; }
.vie-cal-legend .limited::before { background: #dba617; }
.vie-cal-legend .sold-out::before { background: #d63638; }
.vie-cal-legend .stop-sell::before { background: #646970; }

/* ===== FullCalendar Overrides ===== */
#vie-pricing-calendar { min-height: 500px; }
.fc .fc-toolbar-title { font-size: 1.2em !important; }
.fc-event { cursor: pointer; font-size: 11px; }
.fc-daygrid-day.fc-day-today { background: #fffbe6 !important; }

/* ===== Modal (using WP thickbox style) ===== */
.vie-modal { position: fixed; inset: 0; background: rgba(0,0,0,.7); z-index: 100050; display: flex; align-items: center; justify-content: center; }
.vie-modal-box { background: #fff; width: 90%; max-width: 480px; max-height: 85vh; overflow: auto; box-shadow: 0 5px 30px rgba(0,0,0,.3); }
.vie-modal-box .header { display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; border-bottom: 1px solid #dcdcde; background: #f6f7f7; }
.vie-modal-box .header h3 { margin: 0; font-size: 14px; }
.vie-modal-box .header .close { background: 0; border: 0; font-size: 20px; cursor: pointer; color: #646970; }
.vie-modal-box .header .close:hover { color: #d63638; }
.vie-modal-box .body { padding: 16px; }
.vie-modal-box .body .row { display: flex; gap: 12px; margin-bottom: 12px; }
.vie-modal-box .body .row .col { flex: 1; }
.vie-modal-box .body .row label { display: block; font-weight: 500; margin-bottom: 4px; font-size: 13px; }
.vie-modal-box .body .row input,
.vie-modal-box .body .row select { width: 100%; }
.vie-modal-box .footer { display: flex; justify-content: flex-end; gap: 8px; padding: 12px 16px; border-top: 1px solid #dcdcde; background: #f6f7f7; }

/* ===== Bulk Update ===== */
.vie-bulk-container { max-width: 860px; }
.vie-bulk-step { margin-bottom: 0; }
.vie-bulk-step .postbox { margin-bottom: 15px; }
.vie-bulk-step .hndle { display: flex; align-items: center; gap: 10px; }
.vie-bulk-step .step-num { display: inline-flex; align-items: center; justify-content: center; width: 24px; height: 24px; background: #2271b1; color: #fff; border-radius: 50%; font-size: 12px; font-weight: 600; }
.vie-bulk-step .inside { padding: 12px; }

/* Days of Week Selector */
.vie-dow-select { display: flex; gap: 8px; margin-bottom: 12px; }
.vie-dow-select label { cursor: pointer; }
.vie-dow-select input { display: none; }
.vie-dow-select .day { display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; border: 2px solid #c3c4c7; border-radius: 4px; font-weight: 600; font-size: 13px; transition: .15s; }
.vie-dow-select input:checked + .day { background: #2271b1; border-color: #2271b1; color: #fff; }
.vie-dow-select label:hover .day { border-color: #2271b1; }

/* Presets */
.vie-presets { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
.vie-presets .label { color: #646970; font-size: 12px; }

/* Info Box */
.vie-info-grid { display: flex; gap: 24px; padding: 12px; background: #f6f7f7; border: 1px solid #c3c4c7; margin-top: 12px; }
.vie-info-grid .item .label { display: block; font-size: 11px; color: #646970; }
.vie-info-grid .item .value { font-size: 15px; font-weight: 600; }

/* Preview */
.vie-preview { padding: 12px; background: #f0f6fc; border: 1px solid #c3c4c7; margin-bottom: 15px; }
.vie-preview ul { margin: 0; padding-left: 18px; }
.vie-preview li { margin-bottom: 4px; }
.vie-preview strong { color: #2271b1; }
.vie-preview .placeholder { color: #646970; text-align: center; margin: 0; }

/* Status Message */
.vie-msg { font-size: 13px; margin-left: 10px; }
.vie-msg.success { color: #00a32a; }
.vie-msg.error { color: #d63638; }
.vie-msg.loading { color: #2271b1; }

/* Log */
.vie-log { margin-top: 15px; }
.vie-log pre { max-height: 180px; overflow: auto; padding: 10px; background: #1d2327; color: #50c878; font-size: 12px; margin: 0; }

/* ===== Daily Rules Table ===== */
.vie-daily-rules-table { margin: 15px 0; }
.vie-daily-rules-table th { text-align: left; padding: 10px 8px; font-size: 12px; font-weight: 600; background: #f6f7f7; }
.vie-daily-rules-table td { padding: 8px; vertical-align: middle; }
.vie-daily-rules-table .col-apply { width: 60px; text-align: center; }
.vie-daily-rules-table .col-day { width: 120px; }
.vie-daily-rules-table .col-price { width: 150px; }
.vie-daily-rules-table .col-stock { width: 80px; }
.vie-daily-rules-table .col-status { width: 130px; }

.vie-daily-rules-table .day-price-room,
.vie-daily-rules-table .day-price-combo { width: 100%; max-width: 140px; }
.vie-daily-rules-table .day-stock { width: 70px; }
.vie-daily-rules-table .day-status { width: 100%; max-width: 120px; }

.vie-daily-rules-table .vie-day-row.weekend { background: #fff8e5; }
.vie-daily-rules-table .vie-day-row:hover { background: #f0f6fc; }
.vie-daily-rules-table .vie-day-row.weekend:hover { background: #fef3d4; }

/* Day Badge */
.vie-badge { display: inline-block; padding: 2px 6px; font-size: 10px; border-radius: 3px; margin-left: 6px; font-weight: 500; }
.vie-badge.weekend { background: #ffc107; color: #1d2327; }

/* Custom Checkbox */
.vie-checkbox-wrap { display: inline-flex; align-items: center; cursor: pointer; }
.vie-checkbox-wrap input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; }

/* Daily Presets & Copy Values */
.vie-daily-presets, .vie-copy-values { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; margin: 12px 0; }
.vie-daily-presets .label, .vie-copy-values .label { color: #646970; font-size: 12px; font-weight: 500; }

/* Preview Table */
.vie-preview-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 12px; }
.vie-preview-table th { background: #f0f0f1; padding: 6px 8px; text-align: left; font-weight: 600; border: 1px solid #c3c4c7; }
.vie-preview-table td { padding: 6px 8px; border: 1px solid #c3c4c7; }
.vie-preview-table tr:nth-child(even) { background: #f9f9f9; }

/* ===== Empty State ===== */
.vie-empty { text-align: center; padding: 50px 20px; }
.vie-empty .dashicons { font-size: 48px; width: 48px; height: 48px; color: #c3c4c7; }
.vie-empty h3 { margin: 15px 0 8px; }
.vie-empty p { color: #646970; margin-bottom: 15px; }

/* ===== Responsive ===== */
@media (max-width: 1024px) {
    #poststuff .vie-columns { flex-direction: column; }
    #poststuff .vie-col-side { width: 100%; }
}
@media (max-width: 782px) {
    .vie-cal-toolbar { flex-direction: column; align-items: flex-start; }
    .vie-cal-toolbar .selectors { flex-direction: column; width: 100%; }
    .vie-cal-toolbar .selectors select { width: 100%; }
    .vie-repeater-body { grid-template-columns: 1fr; }
    .vie-dow-select { flex-wrap: wrap; }
    .vie-dow-select .day { width: 38px; height: 38px; }
    
    /* Daily Rules Table - Mobile */
    .vie-daily-rules-table { font-size: 12px; }
    .vie-daily-rules-table th { padding: 6px 4px; font-size: 11px; }
    .vie-daily-rules-table td { padding: 6px 4px; }
    .vie-daily-rules-table .col-day { width: auto; }
    .vie-daily-rules-table .col-price { width: auto; }
    .vie-daily-rules-table .day-price-room,
    .vie-daily-rules-table .day-price-combo { max-width: 100px; }
    .vie-daily-rules-table .day-stock { width: 50px; }
    .vie-daily-rules-table .day-status { max-width: 90px; font-size: 11px; }
    .vie-badge { font-size: 9px; padding: 1px 4px; }
}

/* ===========================================================
   PRICE MATRIX GRID - All-in-One View (Refactored)
   =========================================================== */

/* Main Container */
.vie-matrix-wrap { max-width: 100%; }
.vie-matrix-wrap h1 { display: flex; align-items: center; gap: 8px; }
.vie-matrix-wrap h1 .dashicons { font-size: 28px; width: 28px; height: 28px; color: #2271b1; }

/* Toolbar */
.vie-matrix-toolbar { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    flex-wrap: wrap;
    gap: 15px;
    padding: 12px 15px; 
    background: #fff; 
    border: 1px solid #c3c4c7; 
    margin-bottom: 0;
}
.vie-matrix-toolbar form { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
.vie-matrix-toolbar .filter-group { display: flex; align-items: center; gap: 6px; }
.vie-matrix-toolbar .filter-group label { font-weight: 500; font-size: 13px; color: #1d2327; white-space: nowrap; }
.vie-matrix-toolbar .filter-group select { min-width: 120px; }
.vie-matrix-toolbar .filter-group#matrix-hotel { min-width: 180px; }
.vie-matrix-toolbar #btn-load-matrix { display: flex; align-items: center; gap: 4px; }
.vie-matrix-toolbar #btn-load-matrix .dashicons { font-size: 16px; width: 16px; height: 16px; }

.vie-matrix-toolbar .toolbar-actions { display: flex; align-items: center; gap: 6px; }
.vie-matrix-toolbar .toolbar-actions .separator { width: 1px; height: 24px; background: #c3c4c7; margin: 0 6px; }
.vie-matrix-toolbar .toolbar-actions button .dashicons { font-size: 18px; width: 18px; height: 18px; vertical-align: middle; }

/* Status Bar */
.vie-matrix-status {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 15px;
    background: #f6f7f7;
    border: 1px solid #c3c4c7;
    border-top: 0;
    font-size: 12px;
}
.vie-matrix-status .stat-item { margin-right: 15px; color: #646970; }
.vie-matrix-status .stat-item strong { color: #1d2327; font-size: 13px; }
.vie-matrix-status .status-right { display: flex; align-items: center; gap: 15px; }
.vie-matrix-status #matrix-changes { color: #dba617; font-weight: 500; }
.vie-matrix-status #matrix-changes .dashicons { font-size: 14px; vertical-align: middle; margin-right: 2px; }
.vie-matrix-status #matrix-loading .spinner { float: none; margin: 0 4px 0 0; }
.vie-matrix-status #matrix-saved { color: #00a32a; font-weight: 500; }
.vie-matrix-status .hidden { display: none !important; }

/* Legend */
.vie-matrix-legend {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 6px 15px;
    background: #fff;
    border: 1px solid #c3c4c7;
    border-top: 0;
    font-size: 11px;
    color: #646970;
}
.vie-matrix-legend .legend-title { font-weight: 600; color: #1d2327; }
.vie-matrix-legend .legend-item { display: flex; align-items: center; gap: 4px; }
.vie-matrix-legend .color-box { width: 14px; height: 14px; border-radius: 2px; border: 1px solid rgba(0,0,0,.1); }
.vie-matrix-legend .color-box.combo { background: #ff9800; }
.vie-matrix-legend .color-box.room { background: #2196f3; }
.vie-matrix-legend .color-box.stock { background: #9c27b0; }
.vie-matrix-legend .weekend .color-box { background: #fff3e0; border-color: #ff9800; }
.vie-matrix-legend .today .color-box { background: #e3f2fd; border-color: #2196f3; }

/* Matrix Table Wrapper */
.vie-matrix-table-wrapper {
    position: relative;
    border: 1px solid #c3c4c7;
    border-top: 0;
    background: #fff;
    max-height: calc(100vh - 280px);
    min-height: 400px;
    overflow: auto;
}

/* Loading Overlay */
.matrix-loading-overlay {
    position: absolute;
    inset: 0;
    background: rgba(255,255,255,0.8);
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
}
.matrix-loading-overlay.hidden { display: none; }

/* The Table */
.vie-matrix-table {
    border-collapse: separate; /* Required for sticky to work */
    border-spacing: 0;
    width: max-content; /* Allow table to grow horizontally */
    min-width: 100%;
}

/* Header Cells */
.vie-matrix-table thead th {
    position: sticky;
    top: 0;
    z-index: 30;
    background: #f0f0f1;
    border-bottom: 2px solid #2271b1;
    border-right: 1px solid #e0e0e0;
    height: 48px;
    padding: 0;
    font-size: 11px;
    text-align: center;
    vertical-align: middle;
}

/* Corner Cell (Top Left) */
.vie-matrix-table thead th.cell-corner {
    position: sticky;
    left: 0;
    z-index: 40; /* Higher than other headers */
    width: 220px;
    min-width: 220px;
    padding: 0 12px;
    text-align: left;
    font-weight: 600;
    font-size: 12px;
    color: #1d2327;
    background: #f0f0f1;
    border-right: 2px solid #2271b1;
}

/* Day Header Cells */
.vie-matrix-table thead th.day-header {
    width: 90px;
    min-width: 90px;
}
.vie-matrix-table thead th.day-header .day-name { display: block; font-weight: 600; color: #1d2327; }
.vie-matrix-table thead th.day-header .day-date { display: block; color: #646970; font-weight: normal; }
.vie-matrix-table thead th.day-header.weekend { background: #fff8e5; }
.vie-matrix-table thead th.day-header.today { background: #e3f2fd; }

/* Body Rows */
.vie-matrix-table tbody tr {
    height: 84px;
}
.vie-matrix-table tbody tr:hover td {
    background-color: #f9f9f9;
}

/* First Column (Hotel/Room) */
.vie-matrix-table tbody td.col-first {
    position: sticky;
    left: 0;
    z-index: 20;
    background: #fff;
    border-right: 2px solid #2271b1;
    border-bottom: 1px solid #e8e8e8;
    padding: 0;
    width: 220px;
    min-width: 220px;
}

/* Hotel Group Header Row */
.vie-matrix-table tbody tr.row-hotel-header {
    height: 38px;
}
.vie-matrix-table tbody tr.row-hotel-header td {
    background: #f6f7f7;
    border-bottom: 1px solid #e0e0e0;
}
.vie-matrix-table tbody tr.row-hotel-header td.col-first {
    background: #f6f7f7;
    padding: 0 12px;
    cursor: pointer;
}
.vie-matrix-table tbody tr.row-hotel-header:hover td {
    background: #eef3f9;
}

.hotel-header-content {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    font-size: 13px;
    color: #1d2327;
}
.hotel-header-content .toggle-icon { 
    transition: transform .2s; 
    font-size: 16px; 
    width: 16px; 
    height: 16px;
    color: #646970;
}
.row-hotel-header.collapsed .toggle-icon { transform: rotate(-90deg); }
.hotel-header-content .room-count { 
    font-size: 11px; 
    font-weight: normal; 
    color: #646970; 
    background: #e0e0e0; 
    padding: 1px 6px; 
    border-radius: 10px; 
}

/* Room Info in First Column */
.room-info-cell {
    display: flex;
    align-items: center;
    height: 100%;
    padding: 0 12px;
}
.room-info-cell .room-details { flex: 1; min-width: 0; }
.room-info-cell .room-name { 
    font-size: 12px; 
    font-weight: 500; 
    color: #1d2327; 
    white-space: nowrap; 
    overflow: hidden; 
    text-overflow: ellipsis;
    margin-bottom: 2px;
}
.room-info-cell .room-meta { font-size: 10px; color: #646970; }
.room-info-cell .row-actions-btn {
    width: 24px;
    height: 24px;
    padding: 0;
    background: transparent;
    border: 1px solid transparent;
    cursor: pointer;
    border-radius: 3px;
    color: #646970;
    opacity: 0;
    transition: opacity .15s;
}
.vie-matrix-table tbody tr:hover .row-actions-btn { opacity: 1; }
.room-info-cell .row-actions-btn:hover { background: #f0f0f1; border-color: #c3c4c7; }

/* Data Cells */
.vie-matrix-table tbody td.cell-data {
    width: 90px;
    min-width: 90px;
    padding: 6px 4px;
    border-right: 1px solid #e8e8e8;
    border-bottom: 1px solid #e8e8e8;
    background: #fff;
    vertical-align: top;
}
.vie-matrix-table tbody td.cell-data.weekend { background: #fffbf0; }
.vie-matrix-table tbody td.cell-data.today { background: #e8f4fd; }
.vie-matrix-table tbody td.cell-data.changed { background: #fef3d4; box-shadow: inset 0 0 0 2px #dba617; }
.vie-matrix-table tbody td.cell-data.stop-sell { background: #f5f5f5; opacity: .7; }

/* Hover effects for data cells */
.vie-matrix-table tbody tr:hover td.cell-data { background: #f9f9f9; }
.vie-matrix-table tbody tr:hover td.cell-data.weekend { background: #fff5e0; }
.vie-matrix-table tbody tr:hover td.cell-data.today { background: #d4ebfc; }

/* Cell Inputs */
.cell-input-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
    height: 100%;
}
.cell-input {
    display: flex;
    align-items: center;
    gap: 2px;
}
.cell-input label {
    font-size: 9px;
    font-weight: 600;
    width: 12px;
    text-align: center;
    color: #fff;
    padding: 1px 0;
    border-radius: 2px;
    flex-shrink: 0;
}
.cell-input.combo label { background: #ff9800; }
.cell-input.room label { background: #2196f3; }
.cell-input.stock label { background: #9c27b0; }

.cell-input input {
    flex: 1;
    min-width: 0;
    height: 20px;
    padding: 0 4px;
    border: 1px solid #dcdcde;
    border-radius: 2px;
    font-size: 11px;
    text-align: right;
}
.cell-input input:focus {
    border-color: #2271b1;
    box-shadow: 0 0 0 1px #2271b1;
    outline: none;
}
.cell-input.combo input { border-color: #ffcc80; }
.cell-input.combo input:focus { border-color: #ff9800; box-shadow: 0 0 0 1px #ff9800; }

/* Collapsed Rows */
.row-hotel-header.collapsed + .row-room-data,
.row-hotel-header.collapsed ~ .row-room-data[data-hotel-id] {
    display: none; 
}
/* Note: The sibling selector logic needs to be handled carefully in JS or by ensuring grouping */

/* Empty State */
.matrix-empty-state {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: #646970;
}
.matrix-empty-state .dashicons { 
    font-size: 64px; 
    width: 64px; 
    height: 64px; 
    color: #c3c4c7; 
}
.matrix-empty-state h3 { margin: 15px 0 8px; color: #1d2327; }
.matrix-empty-state p { margin: 0; }

/* Quick Edit Popup */
.vie-matrix-popup {
    position: fixed;
    z-index: 100060;
    background: #fff;
    border-radius: 4px;
    box-shadow: 0 4px 20px rgba(0,0,0,.25);
    width: 240px;
}
.vie-matrix-popup .popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    background: #f6f7f7;
    border-bottom: 1px solid #dcdcde;
    border-radius: 4px 4px 0 0;
}
.vie-matrix-popup .popup-title { font-weight: 600; font-size: 12px; }
.vie-matrix-popup .popup-close {
    background: none;
    border: none;
    font-size: 18px;
    cursor: pointer;
    color: #646970;
    padding: 0;
    line-height: 1;
}
.vie-matrix-popup .popup-close:hover { color: #d63638; }
.vie-matrix-popup .popup-body { padding: 12px; }
.vie-matrix-popup .popup-field { margin-bottom: 10px; }
.vie-matrix-popup .popup-field:last-child { margin-bottom: 0; }
.vie-matrix-popup .popup-field label { display: block; font-size: 11px; font-weight: 500; margin-bottom: 4px; }
.vie-matrix-popup .popup-field input,
.vie-matrix-popup .popup-field select { width: 100%; }
.vie-matrix-popup .popup-footer {
    display: flex;
    justify-content: flex-end;
    gap: 6px;
    padding: 10px 12px;
    background: #f6f7f7;
    border-top: 1px solid #dcdcde;
    border-radius: 0 0 4px 4px;
}

/* Row Actions Menu */
.vie-row-actions-menu {
    position: fixed;
    z-index: 100060;
    background: #fff;
    border-radius: 4px;
    box-shadow: 0 4px 20px rgba(0,0,0,.25);
    min-width: 200px;
    padding: 6px 0;
}
.vie-row-actions-menu button {
    display: block;
    width: 100%;
    padding: 8px 12px;
    background: none;
    border: none;
    text-align: left;
    font-size: 12px;
    cursor: pointer;
}
.vie-row-actions-menu button:hover { background: #f0f6fc; color: #2271b1; }
.vie-row-actions-menu button[data-action="clear-row"]:hover { background: #fcf0f1; color: #d63638; }
.vie-row-actions-menu hr { margin: 6px 0; border: 0; border-top: 1px solid #dcdcde; }

/* Selection highlight (for drag-copy) */
.cell-data.selecting { 
    box-shadow: inset 0 0 0 2px #2271b1; 
    background: #e8f4fd !important; 
}
.cell-data.selected { 
    box-shadow: inset 0 0 0 2px #2271b1; 
    background: #d4ebfc !important;
}

/* Responsive */
@media (max-width: 1200px) {
    .vie-matrix-table thead th.cell-corner,
    .vie-matrix-table tbody td.col-first { width: 180px; min-width: 180px; }
    .vie-matrix-table thead th.day-header,
    .vie-matrix-table tbody td.cell-data { width: 80px; min-width: 80px; }
}
@media (max-width: 782px) {
    .vie-matrix-toolbar { flex-direction: column; align-items: stretch; }
    .vie-matrix-toolbar form { flex-direction: column; align-items: stretch; }
    .vie-matrix-toolbar .filter-group { justify-content: space-between; }
    .vie-matrix-toolbar .filter-group select { flex: 1; }
    .vie-matrix-toolbar .toolbar-actions { justify-content: flex-end; }
    
    .vie-matrix-table-wrapper { max-height: calc(100vh - 350px); }
    .vie-matrix-table thead th.cell-corner,
    .vie-matrix-table tbody td.col-first { width: 140px; min-width: 140px; }
    .vie-matrix-table thead th.day-header,
    .vie-matrix-table tbody td.cell-data { width: 70px; min-width: 70px; }
    
    .vie-matrix-table tbody tr { height: 76px; }
    .cell-input label { width: 10px; font-size: 8px; }
}
