# Quáº£n lÃ½ KhÃ¡ch sáº¡n (Hotel Manager) Role

## Tá»•ng quan

Role **"Quáº£n lÃ½ KhÃ¡ch sáº¡n"** (Hotel Manager) Ä‘Æ°á»£c táº¡o Ä‘á»ƒ giá»›i háº¡n quyá»n truy cáº­p cho ngÆ°á»i dÃ¹ng chá»‰ quáº£n lÃ½ cÃ¡c chá»©c nÄƒng liÃªn quan Ä‘áº¿n khÃ¡ch sáº¡n vÃ  Vie Hotel.

## Chá»©c nÄƒng

### Quyá»n truy cáº­p
NgÆ°á»i dÃ¹ng vá»›i role nÃ y cÃ³ thá»ƒ:

1. âœ… **Quáº£n lÃ½ KhÃ¡ch sáº¡n (Hotel Post Type)**
   - ThÃªm, sá»­a, xÃ³a khÃ¡ch sáº¡n
   - ÄÄƒng/Há»§y Ä‘Äƒng khÃ¡ch sáº¡n
   - Quáº£n lÃ½ táº¥t cáº£ taxonomy liÃªn quan:
     - **Äá»‹a Ä‘iá»ƒm** (hotel-location)
     - **Danh má»¥c** (hotel-category)
     - **Háº¡ng sao** (hotel-rank)
     - **Tiá»‡n Ã­ch** (hotel-convenient)

2. âœ… **Vie Hotel Menu**
   - Quáº£n lÃ½ PhÃ²ng
   - Xem vÃ  xá»­ lÃ½ Äáº·t phÃ²ng
   - Quáº£n lÃ½ Lá»‹ch GiÃ¡
   - Bulk Update giÃ¡
   - Xem CÃ i Ä‘áº·t (chá»‰ Ä‘á»c)

3. âœ… **Media Library**
   - Upload áº£nh khÃ¡ch sáº¡n
   - Quáº£n lÃ½ thÆ° viá»‡n áº£nh

4. âœ… **Dashboard**
   - Xem thá»‘ng kÃª khÃ¡ch sáº¡n
   - Xem thá»‘ng kÃª Ä‘áº·t phÃ²ng

5. âœ… **Profile**
   - Chá»‰nh sá»­a thÃ´ng tin cÃ¡ nhÃ¢n

### Giá»›i háº¡n
NgÆ°á»i dÃ¹ng vá»›i role nÃ y **KHÃ”NG THá»‚**:

- âŒ Quáº£n lÃ½ Tours
- âŒ Quáº£n lÃ½ Car Rental
- âŒ Quáº£n lÃ½ Posts/Pages
- âŒ Truy cáº­p Appearance (Themes, Menus, Widgets)
- âŒ Quáº£n lÃ½ Plugins
- âŒ Quáº£n lÃ½ Users
- âŒ Truy cáº­p Settings (WordPress core)
- âŒ Truy cáº­p Database Status (chá»‰ Administrator)

## CÃ¡ch sá»­ dá»¥ng

### 1. Táº¡o ngÆ°á»i dÃ¹ng má»›i vá»›i role Hotel Manager

**BÆ°á»›c 1:** VÃ o WordPress Admin â†’ Users â†’ Add New

**BÆ°á»›c 2:** Äiá»n thÃ´ng tin ngÆ°á»i dÃ¹ng:
- Username
- Email
- Password

**BÆ°á»›c 3:** Trong dropdown **Role**, chá»n "Quáº£n lÃ½ KhÃ¡ch sáº¡n"

**BÆ°á»›c 4:** Click "Add New User"

### 2. Chuyá»ƒn Ä‘á»•i ngÆ°á»i dÃ¹ng hiá»‡n táº¡i sang Hotel Manager

**BÆ°á»›c 1:** VÃ o WordPress Admin â†’ Users â†’ All Users

**BÆ°á»›c 2:** Hover vÃ o ngÆ°á»i dÃ¹ng cáº§n chuyá»ƒn Ä‘á»•i, click "Edit"

**BÆ°á»›c 3:** Trong dropdown **Role**, chá»n "Quáº£n lÃ½ KhÃ¡ch sáº¡n"

**BÆ°á»›c 4:** Click "Update User"

### 3. ÄÄƒng nháº­p vá»›i Hotel Manager

Sau khi Ä‘Äƒng nháº­p, ngÆ°á»i dÃ¹ng sáº½ tá»± Ä‘á»™ng Ä‘Æ°á»£c redirect Ä‘áº¿n trang **Quáº£n lÃ½ KhÃ¡ch sáº¡n**.

Dashboard sáº½ hiá»ƒn thá»‹:
- Widget chÃ o má»«ng vá»›i hÆ°á»›ng dáº«n sá»­ dá»¥ng
- Widget thá»‘ng kÃª khÃ¡ch sáº¡n vÃ  Ä‘áº·t phÃ²ng

## Menu hiá»ƒn thá»‹ cho Hotel Manager

Sau khi Ä‘Äƒng nháº­p, Hotel Manager chá»‰ tháº¥y cÃ¡c menu sau:

```
ğŸ“Š Dashboard
ğŸ¨ KhÃ¡ch sáº¡n (Hotel Post Type)
ğŸ¢ Vie Hotel
   â”œâ”€â”€ PhÃ²ng
   â”œâ”€â”€ Äáº·t phÃ²ng
   â”œâ”€â”€ Lá»‹ch GiÃ¡
   â”œâ”€â”€ Bulk Update
   â””â”€â”€ CÃ i Ä‘áº·t
ğŸ“· Media
ğŸ‘¤ Profile
```

## Admin Bar (Thanh cÃ´ng cá»¥ trÃªn cÃ¹ng)

CÃ¡c quick links xuáº¥t hiá»‡n:
- ğŸ¢ Vie Hotel â†’ Äáº·t phÃ²ng
- ğŸ¢ Vie Hotel â†’ + ThÃªm phÃ²ng
- â• ThÃªm KhÃ¡ch sáº¡n (gÃ³c pháº£i)

## Capabilities (Chi tiáº¿t ká»¹ thuáº­t)

### WordPress Core
- `read`: Äá»c ná»™i dung
- `edit_dashboard`: Truy cáº­p dashboard

### Hotel Post Type
- `edit_hotels`
- `edit_others_hotels`
- `publish_hotels`
- `read_private_hotels`
- `delete_hotels`
- `delete_private_hotels`
- `delete_published_hotels`
- `delete_others_hotels`
- `edit_private_hotels`
- `edit_published_hotels`

### Taxonomy Capabilities

**General:**
- `manage_categories`

**hotel-location (Äá»‹a Ä‘iá»ƒm):**
- `manage_hotel_location`
- `edit_hotel_location`
- `delete_hotel_location`
- `assign_hotel_location`

**hotel-category (Danh má»¥c):**
- `manage_hotel_category`
- `edit_hotel_category`
- `delete_hotel_category`
- `assign_hotel_category`

**hotel-rank (Háº¡ng sao):**
- `manage_hotel_rank`
- `edit_hotel_rank`
- `delete_hotel_rank`
- `assign_hotel_rank`

**hotel-convenient (Tiá»‡n Ã­ch):**
- `manage_hotel_convenient`
- `edit_hotel_convenient`
- `delete_hotel_convenient`
- `assign_hotel_convenient`

### Media
- `upload_files`
- `edit_files`

### Vie Hotel Menu
- `manage_vie_hotel`
- `view_vie_hotel_bookings`
- `edit_vie_hotel_rooms`
- `edit_vie_hotel_calendar`
- `view_vie_hotel_settings`

### Comments
- `moderate_comments`
- `edit_comment`

## KÃ­ch hoáº¡t Role

Role Ä‘Æ°á»£c tá»± Ä‘á»™ng táº¡o khi:
1. Theme Ä‘Æ°á»£c activate láº§n Ä‘áº§u
2. Báº¡n cÃ³ thá»ƒ force táº¡o láº¡i báº±ng cÃ¡ch:
   - Deactivate theme â†’ Activate láº¡i
   - Hoáº·c run: `Vie_Role_Manager::get_instance()->create_hotel_manager_role()`

### Quan trá»ng: Hotel Post Type Capabilities

Há»‡ thá»‘ng tá»± Ä‘á»™ng map capabilities cho Hotel post type Ä‘á»ƒ Hotel Manager cÃ³ thá»ƒ chá»‰nh sá»­a:
- File `HotelPostType.php` Ä‘áº£m báº£o Hotel post type sá»­ dá»¥ng custom capabilities
- Khi theme activate, Hotel post type Ä‘Æ°á»£c cáº¥u hÃ¬nh vá»›i Ä‘Ãºng capabilities
- Administrator role cÅ©ng tá»± Ä‘á»™ng Ä‘Æ°á»£c cáº¥p quyá»n Hotel post type

## XÃ³a Role

Role Ä‘Æ°á»£c tá»± Ä‘á»™ng xÃ³a khi:
- Switch sang theme khÃ¡c

## Troubleshooting

### Váº¥n Ä‘á»: KhÃ´ng tháº¥y menu Vie Hotel
**Giáº£i phÃ¡p:**
1. Kiá»ƒm tra role Ä‘Ã£ Ä‘Æ°á»£c táº¡o chÆ°a: WordPress Admin â†’ Users â†’ Add New â†’ kiá»ƒm tra dropdown Role
2. Náº¿u chÆ°a cÃ³, deactivate theme vÃ  activate láº¡i
3. Kiá»ƒm tra file `/inc/admin/RoleManager.php` Ä‘Ã£ Ä‘Æ°á»£c load trong `functions.php`

### Váº¥n Ä‘á»: Hotel Manager tháº¥y quÃ¡ nhiá»u menu
**Giáº£i phÃ¡p:**
1. Clear cache trÃ¬nh duyá»‡t
2. Logout vÃ  login láº¡i
3. Kiá»ƒm tra khÃ´ng cÃ³ plugin nÃ o override quyá»n (vÃ­ dá»¥: User Role Editor)

### Váº¥n Ä‘á»: KhÃ´ng truy cáº­p Ä‘Æ°á»£c Hotel post type
**Giáº£i phÃ¡p:**
1. Kiá»ƒm tra Hotel post type cÃ³ Ä‘Æ°á»£c Ä‘Äƒng kÃ½ vá»›i Ä‘Ãºng capabilities khÃ´ng
2. Role cáº§n cÃ³ `edit_hotels`, `publish_hotels`, etc.

### Váº¥n Ä‘á»: KhÃ´ng chá»‰nh sá»­a Ä‘Æ°á»£c taxonomy (Äá»‹a Ä‘iá»ƒm, Danh má»¥c, v.v.)
**Giáº£i phÃ¡p:**
1. Deactivate theme vÃ  activate láº¡i Ä‘á»ƒ cáº¥u hÃ¬nh láº¡i capabilities
2. Kiá»ƒm tra file `HotelPostType.php` Ä‘Ã£ load trong `functions.php`
3. Clear cache trÃ¬nh duyá»‡t
4. Trong WordPress admin, vÃ o Hotels â†’ Categories/Tags Ä‘á»ƒ kiá»ƒm tra

## Báº£o máº­t

- âœ… Role nÃ y **KHÃ”NG THá»‚** thay Ä‘á»•i code
- âœ… Role nÃ y **KHÃ”NG THá»‚** install/delete plugins
- âœ… Role nÃ y **KHÃ”NG THá»‚** thay Ä‘á»•i theme
- âœ… Role nÃ y **KHÃ”NG THá»‚** quáº£n lÃ½ users
- âœ… All actions Ä‘Æ°á»£c log náº¿u WP_DEBUG = true

## Files liÃªn quan

- `RoleManager.php`: Quáº£n lÃ½ role vÃ  capabilities
- `HotelPostType.php`: Map capabilities cho Hotel post type
- `admin-menu.php`: ÄÄƒng kÃ½ menu vá»›i capabilities phÃ¹ há»£p
- `README-HOTEL-MANAGER.md`: TÃ i liá»‡u nÃ y

## Changelog

### Version 1.0.0 (2025-12-02)
- âœ¨ Táº¡o role "Quáº£n lÃ½ KhÃ¡ch sáº¡n"
- âœ¨ Giá»›i háº¡n menu admin
- âœ¨ TÃ¹y chá»‰nh dashboard widgets
- âœ¨ Redirect sau login
- âœ¨ TÃ¹y chá»‰nh admin bar
- âœ¨ Cáº¥p quyá»n Vie Hotel cho Administrator
- âœ¨ Map capabilities cho Hotel post type
- âœ¨ Cho phÃ©p Hotel Manager chá»‰nh sá»­a Hotel posts
- âœ¨ Map capabilities cho táº¥t cáº£ Hotel taxonomies
- âœ¨ Cho phÃ©p quáº£n lÃ½ Äá»‹a Ä‘iá»ƒm, Danh má»¥c, Háº¡ng sao, Tiá»‡n Ã­ch

## LiÃªn há»‡ há»— trá»£

Náº¿u cÃ³ váº¥n Ä‘á» hoáº·c Ä‘á» xuáº¥t, vui lÃ²ng liÃªn há»‡ Vie Development Team.

---

**PhiÃªn báº£n:** 1.0.0  
**NgÃ y cáº­p nháº­t:** 02/12/2025  
**TÃ¡c giáº£:** Vie Development Team
